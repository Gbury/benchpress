
type json <ocaml module="Yojson.Safe" t="t"> = abstract

type task_progress = {
  start_timestamp: float;
  ~completion: float option;
}

type task_status = [
  | In_queue
  | Started of task_progress
  | Done
]

type task_descr = {
  name: string; (* name of this task *)
  synopsis: string option;
  status: task_status;
}

type push_notification = [
  | Task_update of task_descr
]

type query = [
  | Q_task_list
]

type response = [
  | R_task_list of (task_descr option * int)
]

