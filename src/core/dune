(library
 (name benchpress)
 (public_name benchpress)
 (wrapped true)
 (libraries containers containers.unix containers.thread containers.sexp re
   re.perl csv cmdliner result toml olinq iter decoders printbox yojson
   decoders-yojson sqlite3 sqlite3_utils)
 (flags :standard -warn-error -3-32-50 -safe-string))

(rule
  (targets builtin_config.ml)
  (deps builtin_config.sexp)
  (action
    (with-stdout-to %{targets}
     (progn
       (echo "let config = {sexp|")
       (cat %{deps})
       (echo "|sexp} ;;")))))
